<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<!-- 面包屑导航 -->
<nav th:fragment="breadcrumb" class="breadcrumb-container" aria-label="面包屑导航">
    <div class="container-fluid">
        <ol class="breadcrumb mb-0">
            <!-- 首页链接 -->
            <li class="breadcrumb-item">
                <a th:href="@{/admin/dashboard}" class="breadcrumb-link">
                    <i class="fas fa-home me-1"></i>
                    首页
                </a>
            </li>
            
            <!-- 动态面包屑 -->
            <th:block th:if="${breadcrumbs != null and !breadcrumbs.isEmpty()}">
                <li class="breadcrumb-item" 
                    th:each="crumb, iterStat : ${breadcrumbs}"
                    th:classappend="${iterStat.last ? 'active' : ''}">
                    
                    <!-- 非最后一项显示为链接 -->
                    <a th:if="${!iterStat.last and crumb.url != null}" 
                       th:href="${crumb.url}" 
                       th:text="${crumb.name}"
                       class="breadcrumb-link">面包屑项</a>
                    
                    <!-- 最后一项或无链接项显示为文本 -->
                    <span th:if="${iterStat.last or crumb.url == null}" 
                          th:text="${crumb.name}"
                          class="breadcrumb-current">当前页面</span>
                </li>
            </th:block>
            
            <!-- 基于当前页面的自动面包屑 -->
            <th:block th:if="${breadcrumbs == null or breadcrumbs.isEmpty()}">
                <!-- 系统管理模块 -->
                <th:block th:if="${currentPage == 'users'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">系统管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">用户管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'roles'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">系统管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">角色管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'permissions'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">系统管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">权限管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'settings'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">系统管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">系统设置</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'notifications'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">系统管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">通知管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'activity-log'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">系统管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">活动日志</span>
                    </li>
                </th:block>
                
                <!-- 教务管理模块 -->
                <th:block th:if="${currentPage == 'courses'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">教务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">课程管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'grades'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">教务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">成绩管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'attendance'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">教务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">考勤管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'classes'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">教务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">班级管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'schedules'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">教务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">课程安排</span>
                    </li>
                </th:block>
                
                <!-- 学生管理 -->
                <th:block th:if="${currentPage == 'students'}">
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">学生管理</span>
                    </li>
                </th:block>
                
                <!-- 人事管理模块 -->
                <th:block th:if="${currentPage == 'teachers'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">人事管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">教师管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'staff'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">人事管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">员工管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'departments'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">人事管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">部门管理</span>
                    </li>
                </th:block>
                
                <!-- 财务管理模块 -->
                <th:block th:if="${currentPage == 'fee-items'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">财务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">费用项目</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'payments'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">财务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">缴费管理</span>
                    </li>
                </th:block>
                
                <th:block th:if="${currentPage == 'payment-records'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">财务管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">缴费记录</span>
                    </li>
                </th:block>
                
                <!-- 个人中心 -->
                <th:block th:if="${currentPage == 'profile'}">
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">个人资料</span>
                    </li>
                </th:block>
                
                <!-- API测试 -->
                <th:block th:if="${currentPage == 'test-api'}">
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">API测试</span>
                    </li>
                </th:block>
                
                <!-- 权限诊断 -->
                <th:block th:if="${currentPage == 'diagnostic'}">
                    <li class="breadcrumb-item">
                        <span class="breadcrumb-text">系统管理</span>
                    </li>
                    <li class="breadcrumb-item active">
                        <span class="breadcrumb-current">权限诊断</span>
                    </li>
                </th:block>
            </th:block>
        </ol>
    </div>
</nav>

<!-- 简化版面包屑（用于移动端） -->
<nav th:fragment="breadcrumb-simple" class="breadcrumb-simple d-md-none" aria-label="简化面包屑导航">
    <div class="container-fluid">
        <div class="d-flex align-items-center">
            <a th:href="@{/admin/dashboard}" class="btn btn-link btn-sm p-0 me-2">
                <i class="fas fa-home"></i>
            </a>
            <span class="breadcrumb-separator">/</span>
            <span class="current-page ms-2" th:text="${pageTitle ?: '当前页面'}">当前页面</span>
        </div>
    </div>
</nav>

</html>
