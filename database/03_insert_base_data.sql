-- ================================================
-- 校园管理系统基础数据插入脚本
-- 创建时间: 2025-06-05
-- 编码: UTF-8
-- 功能: 插入用户、角色、权限等基础数据
-- ================================================

-- 使用数据库
USE campus_management_db;

-- 设置字符编码
SET NAMES utf8mb4;
SET CHARACTER SET utf8mb4;

-- ================================================
-- 1. 插入角色数据 (tb_role)
-- ================================================
INSERT INTO tb_role (role_name, role_key, role_sort, remark) VALUES
('超级管理员', 'admin', 1, '系统超级管理员，拥有所有权限'),
('系统管理员', 'system_admin', 2, '系统管理员，管理系统设置和用户'),
('教务管理员', 'academic_admin', 3, '教务管理员，管理课程和学籍'),
('财务管理员', 'finance_admin', 4, '财务管理员，管理缴费和财务'),
('教师', 'teacher', 5, '教师，管理课程和成绩'),
('学生', 'student', 6, '学生，查看课程和成绩'),
('家长', 'parent', 7, '家长，查看孩子信息');

-- ================================================
-- 2. 插入权限数据 (tb_permission)
-- ================================================
INSERT INTO tb_permission (permission_code, permission_name, resource_type, resource_url, permission_desc) VALUES
-- 系统管理权限
('system:user:list', '用户列表查看', 'api', '/api/users', '查看用户列表'),
('system:user:add', '用户添加', 'api', '/api/users', '添加新用户'),
('system:user:edit', '用户编辑', 'api', '/api/users/*', '编辑用户信息'),
('system:user:delete', '用户删除', 'api', '/api/users/*', '删除用户'),
('system:role:list', '角色列表查看', 'api', '/api/roles', '查看角色列表'),
('system:role:add', '角色添加', 'api', '/api/roles', '添加新角色'),
('system:role:edit', '角色编辑', 'api', '/api/roles/*', '编辑角色信息'),
('system:role:delete', '角色删除', 'api', '/api/roles/*', '删除角色'),
('system:permission:list', '权限列表查看', 'api', '/api/permissions', '查看权限列表'),

-- 学生管理权限
('student:list', '学生列表查看', 'api', '/api/students', '查看学生列表'),
('student:add', '学生添加', 'api', '/api/students', '添加新学生'),
('student:edit', '学生编辑', 'api', '/api/students/*', '编辑学生信息'),
('student:delete', '学生删除', 'api', '/api/students/*', '删除学生'),
('student:profile', '学生档案查看', 'api', '/api/students/*/profile', '查看学生详细档案'),

-- 课程管理权限
('course:list', '课程列表查看', 'api', '/api/courses', '查看课程列表'),
('course:add', '课程添加', 'api', '/api/courses', '添加新课程'),
('course:edit', '课程编辑', 'api', '/api/courses/*', '编辑课程信息'),
('course:delete', '课程删除', 'api', '/api/courses/*', '删除课程'),
('course:schedule', '课程排课', 'api', '/api/courses/*/schedule', '管理课程排课'),

-- 成绩管理权限
('grade:list', '成绩列表查看', 'api', '/api/grades', '查看成绩列表'),
('grade:add', '成绩录入', 'api', '/api/grades', '录入学生成绩'),
('grade:edit', '成绩编辑', 'api', '/api/grades/*', '编辑学生成绩'),
('grade:delete', '成绩删除', 'api', '/api/grades/*', '删除成绩记录'),
('grade:export', '成绩导出', 'api', '/api/grades/export', '导出成绩数据'),

-- 班级管理权限
('class:list', '班级列表查看', 'api', '/api/classes', '查看班级列表'),
('class:add', '班级添加', 'api', '/api/classes', '添加新班级'),
('class:edit', '班级编辑', 'api', '/api/classes/*', '编辑班级信息'),
('class:delete', '班级删除', 'api', '/api/classes/*', '删除班级'),

-- 选课管理权限
('selection:list', '选课列表查看', 'api', '/api/selections', '查看选课列表'),
('selection:add', '选课操作', 'api', '/api/selections', '学生选课操作'),
('selection:delete', '退课操作', 'api', '/api/selections/*', '学生退课操作'),

-- 缴费管理权限
('fee:list', '缴费项目查看', 'api', '/api/fees', '查看缴费项目'),
('fee:add', '缴费项目添加', 'api', '/api/fees', '添加缴费项目'),
('fee:edit', '缴费项目编辑', 'api', '/api/fees/*', '编辑缴费项目'),
('fee:delete', '缴费项目删除', 'api', '/api/fees/*', '删除缴费项目'),
('payment:list', '缴费记录查看', 'api', '/api/payments', '查看缴费记录'),
('payment:add', '缴费记录添加', 'api', '/api/payments', '添加缴费记录'),
('payment:export', '缴费记录导出', 'api', '/api/payments/export', '导出缴费记录'),

-- 个人信息权限
('profile:view', '个人信息查看', 'api', '/api/profile', '查看个人信息'),
('profile:edit', '个人信息编辑', 'api', '/api/profile', '编辑个人信息');

-- ================================================
-- 3. 插入角色权限关联数据 (tb_role_permission)
-- ================================================

-- 超级管理员拥有所有权限
INSERT INTO tb_role_permission (role_id, permission_id)
SELECT 1, id FROM tb_permission;

-- 系统管理员权限
INSERT INTO tb_role_permission (role_id, permission_id)
SELECT 2, id FROM tb_permission WHERE permission_code LIKE 'system:%'
UNION ALL
SELECT 2, id FROM tb_permission WHERE permission_code IN ('profile:view', 'profile:edit');

-- 教务管理员权限
INSERT INTO tb_role_permission (role_id, permission_id)
SELECT 3, id FROM tb_permission WHERE permission_code LIKE 'student:%'
   OR permission_code LIKE 'course:%'
   OR permission_code LIKE 'grade:%'
   OR permission_code LIKE 'class:%'
   OR permission_code LIKE 'selection:%'
   OR permission_code IN ('profile:view', 'profile:edit');

-- 财务管理员权限
INSERT INTO tb_role_permission (role_id, permission_id)
SELECT 4, id FROM tb_permission WHERE permission_code LIKE 'fee:%'
   OR permission_code LIKE 'payment:%'
   OR permission_code IN ('student:list', 'student:profile', 'profile:view', 'profile:edit');

-- 教师权限
INSERT INTO tb_role_permission (role_id, permission_id)
SELECT 5, id FROM tb_permission WHERE permission_code IN (
    'course:list', 'grade:list', 'grade:add', 'grade:edit', 'grade:export',
    'student:list', 'student:profile', 'class:list', 'selection:list',
    'profile:view', 'profile:edit'
);

-- 学生权限
INSERT INTO tb_role_permission (role_id, permission_id)
SELECT 6, id FROM tb_permission WHERE permission_code IN (
    'course:list', 'grade:list', 'selection:list', 'selection:add', 'selection:delete',
    'fee:list', 'payment:list', 'profile:view', 'profile:edit'
);

-- 家长权限
INSERT INTO tb_role_permission (role_id, permission_id)
SELECT 7, id FROM tb_permission WHERE permission_code IN (
    'student:profile', 'course:list', 'grade:list', 'fee:list', 'payment:list',
    'profile:view', 'profile:edit'
);

-- ================================================
-- 4. 插入管理员用户数据 (tb_user)
-- ================================================
INSERT INTO tb_user (username, password, email, real_name, phone, status) VALUES
-- 管理员账户 (密码: admin123)
('admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8ioctKi85KQ9e1.dMjL6VJNlZLWsS', 'admin@campus.edu.cn', '系统管理员', '13800138000', 1),
-- 教务管理员 (密码: academic123)
('academic_admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8ioctKi85KQ9e1.dMjL6VJNlZLWsS', 'academic@campus.edu.cn', '教务管理员', '13800138001', 1),
-- 财务管理员 (密码: finance123)
('finance_admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8ioctKi85KQ9e1.dMjL6VJNlZLWsS', 'finance@campus.edu.cn', '财务管理员', '13800138002', 1);

-- ================================================
-- 5. 插入管理员用户角色关联 (tb_user_role)
-- ================================================
INSERT INTO tb_user_role (user_id, role_id) VALUES
(1, 1), -- admin -> 超级管理员
(2, 3), -- academic_admin -> 教务管理员
(3, 4); -- finance_admin -> 财务管理员

-- ================================================
-- 6. 插入班级数据 (tb_class)
-- ================================================
INSERT INTO tb_class (class_name, class_code, grade, description, student_count) VALUES
-- 计算机科学与技术专业
('计算机科学与技术2021级1班', 'CS2021-1', '2021级', '计算机科学与技术专业2021级第1班', 45),
('计算机科学与技术2021级2班', 'CS2021-2', '2021级', '计算机科学与技术专业2021级第2班', 43),
('计算机科学与技术2021级3班', 'CS2021-3', '2021级', '计算机科学与技术专业2021级第3班', 44),
('计算机科学与技术2022级1班', 'CS2022-1', '2022级', '计算机科学与技术专业2022级第1班', 48),
('计算机科学与技术2022级2班', 'CS2022-2', '2022级', '计算机科学与技术专业2022级第2班', 46),
('计算机科学与技术2022级3班', 'CS2022-3', '2022级', '计算机科学与技术专业2022级第3班', 47),
('计算机科学与技术2023级1班', 'CS2023-1', '2023级', '计算机科学与技术专业2023级第1班', 50),
('计算机科学与技术2023级2班', 'CS2023-2', '2023级', '计算机科学与技术专业2023级第2班', 49),
('计算机科学与技术2023级3班', 'CS2023-3', '2023级', '计算机科学与技术专业2023级第3班', 48),

-- 软件工程专业
('软件工程2021级1班', 'SE2021-1', '2021级', '软件工程专业2021级第1班', 42),
('软件工程2021级2班', 'SE2021-2', '2021级', '软件工程专业2021级第2班', 44),
('软件工程2021级3班', 'SE2021-3', '2021级', '软件工程专业2021级第3班', 43),
('软件工程2022级1班', 'SE2022-1', '2022级', '软件工程专业2022级第1班', 47),
('软件工程2022级2班', 'SE2022-2', '2022级', '软件工程专业2022级第2班', 45),
('软件工程2022级3班', 'SE2022-3', '2022级', '软件工程专业2022级第3班', 46),
('软件工程2023级1班', 'SE2023-1', '2023级', '软件工程专业2023级第1班', 48),
('软件工程2023级2班', 'SE2023-2', '2023级', '软件工程专业2023级第2班', 46),
('软件工程2023级3班', 'SE2023-3', '2023级', '软件工程专业2023级第3班', 47),

-- 信息安全专业
('信息安全2021级1班', 'IS2021-1', '2021级', '信息安全专业2021级第1班', 38),
('信息安全2021级2班', 'IS2021-2', '2021级', '信息安全专业2021级第2班', 37),
('信息安全2022级1班', 'IS2022-1', '2022级', '信息安全专业2022级第1班', 40),
('信息安全2022级2班', 'IS2022-2', '2022级', '信息安全专业2022级第2班', 39),
('信息安全2023级1班', 'IS2023-1', '2023级', '信息安全专业2023级第1班', 41),
('信息安全2023级2班', 'IS2023-2', '2023级', '信息安全专业2023级第2班', 40),

-- 数据科学与大数据技术专业
('数据科学2022级1班', 'DS2022-1', '2022级', '数据科学与大数据技术专业2022级第1班', 45),
('数据科学2022级2班', 'DS2022-2', '2022级', '数据科学与大数据技术专业2022级第2班', 44),
('数据科学2023级1班', 'DS2023-1', '2023级', '数据科学与大数据技术专业2023级第1班', 46),
('数据科学2023级2班', 'DS2023-2', '2023级', '数据科学与大数据技术专业2023级第2班', 45),

-- 人工智能专业
('人工智能2022级1班', 'AI2022-1', '2022级', '人工智能专业2022级第1班', 42),
('人工智能2023级1班', 'AI2023-1', '2023级', '人工智能专业2023级第1班', 43),
('人工智能2023级2班', 'AI2023-2', '2023级', '人工智能专业2023级第2班', 42),

-- 物联网工程专业
('物联网工程2022级1班', 'IOT2022-1', '2022级', '物联网工程专业2022级第1班', 38),
('物联网工程2023级1班', 'IOT2023-1', '2023级', '物联网工程专业2023级第1班', 39),

-- 网络工程专业
('网络工程2021级1班', 'NE2021-1', '2021级', '网络工程专业2021级第1班', 35),
('网络工程2022级1班', 'NE2022-1', '2022级', '网络工程专业2022级第1班', 36),
('网络工程2023级1班', 'NE2023-1', '2023级', '网络工程专业2023级第1班', 37),
('网络工程2024级1班', 'NE2024-1', '2024级', '网络工程专业2024级第1班', 38),
('网络工程2025级1班', 'NE2025-1', '2025级', '网络工程专业2025级第1班', 39),

-- 2024级新增班级
('计算机科学与技术2024级1班', 'CS2024-1', '2024级', '计算机科学与技术专业2024级第1班', 50),
('计算机科学与技术2024级2班', 'CS2024-2', '2024级', '计算机科学与技术专业2024级第2班', 49),
('计算机科学与技术2024级3班', 'CS2024-3', '2024级', '计算机科学与技术专业2024级第3班', 48),
('软件工程2024级1班', 'SE2024-1', '2024级', '软件工程专业2024级第1班', 47),
('软件工程2024级2班', 'SE2024-2', '2024级', '软件工程专业2024级第2班', 46),
('软件工程2024级3班', 'SE2024-3', '2024级', '软件工程专业2024级第3班', 45),
('信息安全2024级1班', 'IS2024-1', '2024级', '信息安全专业2024级第1班', 42),
('信息安全2024级2班', 'IS2024-2', '2024级', '信息安全专业2024级第2班', 41),
('数据科学2024级1班', 'DS2024-1', '2024级', '数据科学与大数据技术专业2024级第1班', 44),
('数据科学2024级2班', 'DS2024-2', '2024级', '数据科学与大数据技术专业2024级第2班', 43),
('人工智能2024级1班', 'AI2024-1', '2024级', '人工智能专业2024级第1班', 40),
('人工智能2024级2班', 'AI2024-2', '2024级', '人工智能专业2024级第2班', 39),
('物联网工程2024级1班', 'IOT2024-1', '2024级', '物联网工程专业2024级第1班', 38),

-- 2025级新增班级
('计算机科学与技术2025级1班', 'CS2025-1', '2025级', '计算机科学与技术专业2025级第1班', 52),
('计算机科学与技术2025级2班', 'CS2025-2', '2025级', '计算机科学与技术专业2025级第2班', 51),
('计算机科学与技术2025级3班', 'CS2025-3', '2025级', '计算机科学与技术专业2025级第3班', 50),
('软件工程2025级1班', 'SE2025-1', '2025级', '软件工程专业2025级第1班', 49),
('软件工程2025级2班', 'SE2025-2', '2025级', '软件工程专业2025级第2班', 48),
('软件工程2025级3班', 'SE2025-3', '2025级', '软件工程专业2025级第3班', 47),
('信息安全2025级1班', 'IS2025-1', '2025级', '信息安全专业2025级第1班', 44),
('信息安全2025级2班', 'IS2025-2', '2025级', '信息安全专业2025级第2班', 43),
('数据科学2025级1班', 'DS2025-1', '2025级', '数据科学与大数据技术专业2025级第1班', 46),
('数据科学2025级2班', 'DS2025-2', '2025级', '数据科学与大数据技术专业2025级第2班', 45),
('人工智能2025级1班', 'AI2025-1', '2025级', '人工智能专业2025级第1班', 42),
('人工智能2025级2班', 'AI2025-2', '2025级', '人工智能专业2025级第2班', 41),
('物联网工程2025级1班', 'IOT2025-1', '2025级', '物联网工程专业2025级第1班', 40),
('物联网工程2025级2班', 'IOT2025-2', '2025级', '物联网工程专业2025级第2班', 39);

-- ================================================
-- 7. 插入缴费项目数据 (tb_fee_item)
-- ================================================
INSERT INTO tb_fee_item (item_name, item_code, amount, fee_type, applicable_grade, due_date, description) VALUES
-- 学费
('学费', 'TUITION_2025_1', 5200.00, '学费', '全部年级', '2025-09-15', '2025学年第一学期学费'),
('学费', 'TUITION_2025_2', 5200.00, '学费', '全部年级', '2026-03-15', '2025学年第二学期学费'),
('学费', 'TUITION_2024_1', 5000.00, '学费', '全部年级', '2024-09-15', '2024学年第一学期学费'),
('学费', 'TUITION_2024_2', 5000.00, '学费', '全部年级', '2025-03-15', '2024学年第二学期学费'),
('学费', 'TUITION_2023_1', 4800.00, '学费', '2021级,2022级,2023级', '2023-09-15', '2023学年第一学期学费'),
('学费', 'TUITION_2023_2', 4800.00, '学费', '2021级,2022级,2023级', '2024-03-15', '2023学年第二学期学费'),

-- 住宿费
('住宿费', 'DORM_2024_1', 1200.00, '住宿费', '全部年级', '2024-09-15', '2024学年第一学期住宿费'),
('住宿费', 'DORM_2024_2', 1200.00, '住宿费', '全部年级', '2025-03-15', '2024学年第二学期住宿费'),
('住宿费', 'DORM_2023_1', 1100.00, '住宿费', '全部年级', '2023-09-15', '2023学年第一学期住宿费'),
('住宿费', 'DORM_2023_2', 1100.00, '住宿费', '全部年级', '2024-03-15', '2023学年第二学期住宿费'),

-- 教材费
('教材费', 'TEXTBOOK_2024_1', 300.00, '教材费', '全部年级', '2024-09-30', '2024学年第一学期教材费'),
('教材费', 'TEXTBOOK_2024_2', 300.00, '教材费', '全部年级', '2025-03-30', '2024学年第二学期教材费'),
('教材费', 'TEXTBOOK_2023_1', 280.00, '教材费', '全部年级', '2023-09-30', '2023学年第一学期教材费'),
('教材费', 'TEXTBOOK_2023_2', 280.00, '教材费', '全部年级', '2024-03-30', '2023学年第二学期教材费'),

-- 实验费
('实验费', 'LAB_FEE_2024_1', 200.00, '实验费', '全部年级', '2024-10-15', '2024学年第一学期实验费'),
('实验费', 'LAB_FEE_2024_2', 200.00, '实验费', '全部年级', '2025-04-15', '2024学年第二学期实验费'),
('实验费', 'LAB_FEE_2023_1', 180.00, '实验费', '全部年级', '2023-10-15', '2023学年第一学期实验费'),
('实验费', 'LAB_FEE_2023_2', 180.00, '实验费', '全部年级', '2024-04-15', '2023学年第二学期实验费'),

-- 专项费用
('体检费', 'MEDICAL_2025', 85.00, '体检费', '2025级', '2025-10-01', '2025年度体检费'),
('体检费', 'MEDICAL_2024', 80.00, '体检费', '2024级', '2024-10-01', '2024年度体检费'),
('体检费', 'MEDICAL_2023', 75.00, '体检费', '2021级,2022级,2023级', '2023-10-01', '2023年度体检费'),
('军训费', 'MILITARY_2025', 160.00, '军训费', '2025级', '2025-09-01', '2025级新生军训费'),
('军训费', 'MILITARY_2024', 150.00, '军训费', '2024级', '2024-09-01', '2024级新生军训费'),
('军训费', 'MILITARY_2023', 140.00, '军训费', '2023级', '2023-09-01', '2023级新生军训费'),
('军训费', 'MILITARY_2022', 130.00, '军训费', '2022级', '2022-09-01', '2022级新生军训费'),
('军训费', 'MILITARY_2021', 120.00, '军训费', '2021级', '2021-09-01', '2021级新生军训费'),

-- 保险费
('保险费', 'INSURANCE_2024', 100.00, '保险费', '全部年级', '2024-09-15', '2024学年学生保险费'),
('保险费', 'INSURANCE_2023', 95.00, '保险费', '全部年级', '2023-09-15', '2023学年学生保险费'),

-- 网络费
('网络费', 'NETWORK_2024_1', 50.00, '网络费', '全部年级', '2024-09-30', '2024学年第一学期网络使用费'),
('网络费', 'NETWORK_2024_2', 50.00, '网络费', '全部年级', '2025-03-30', '2024学年第二学期网络使用费'),
('网络费', 'NETWORK_2023_1', 45.00, '网络费', '全部年级', '2023-09-30', '2023学年第一学期网络使用费'),
('网络费', 'NETWORK_2023_2', 45.00, '网络费', '全部年级', '2024-03-30', '2023学年第二学期网络使用费'),

-- 考试费
('英语四级考试费', 'CET4_2024_1', 30.00, '考试费', '全部年级', '2024-10-20', '2024年12月英语四级考试费'),
('英语四级考试费', 'CET4_2024_2', 30.00, '考试费', '全部年级', '2025-04-20', '2025年6月英语四级考试费'),
('英语六级考试费', 'CET6_2024_1', 30.00, '考试费', '全部年级', '2024-10-20', '2024年12月英语六级考试费'),
('英语六级考试费', 'CET6_2024_2', 30.00, '考试费', '全部年级', '2025-04-20', '2025年6月英语六级考试费'),
('计算机等级考试费', 'NCRE_2024_1', 80.00, '考试费', '全部年级', '2024-11-15', '2024年计算机等级考试费'),
('计算机等级考试费', 'NCRE_2024_2', 80.00, '考试费', '全部年级', '2025-05-15', '2025年计算机等级考试费'),

-- 其他费用
('图书馆押金', 'LIBRARY_DEPOSIT_2025', 120.00, '押金', '2025级', '2025-09-10', '图书馆借书押金'),
('图书馆押金', 'LIBRARY_DEPOSIT_2024', 110.00, '押金', '2024级', '2024-09-10', '图书馆借书押金'),
('图书馆押金', 'LIBRARY_DEPOSIT_2023', 100.00, '押金', '2023级', '2023-09-10', '图书馆借书押金'),
('学生证工本费', 'STUDENT_CARD_2025', 25.00, '工本费', '2025级', '2025-09-20', '学生证制作费'),
('学生证工本费', 'STUDENT_CARD_2024', 22.00, '工本费', '2024级', '2024-09-20', '学生证制作费'),
('学生证工本费', 'STUDENT_CARD_2023', 20.00, '工本费', '2023级', '2023-09-20', '学生证制作费'),
('校园卡工本费', 'CAMPUS_CARD', 25.00, '工本费', '全部年级', '2024-09-10', '校园一卡通工本费'),
('毕业设计费', 'THESIS_FEE', 200.00, '毕业费', '2021级', '2024-10-01', '毕业设计指导费'),
('学位证书费', 'DEGREE_CERT', 50.00, '毕业费', '2021级', '2025-05-01', '学位证书工本费'),
('毕业证书费', 'DIPLOMA_FEE', 30.00, '毕业费', '2021级', '2025-05-01', '毕业证书工本费'),

-- 新增2025级专项费用
('入学体检费', 'ENTRANCE_MEDICAL_2025', 120.00, '体检费', '2025级', '2025-08-20', '2025级新生入学体检费'),
('新生报到费', 'REGISTRATION_2025', 50.00, '报到费', '2025级', '2025-08-25', '2025级新生报到手续费'),
('新生材料费', 'MATERIAL_2025', 80.00, '材料费', '2025级', '2025-09-05', '2025级新生学习材料费'),
('入学体检费', 'ENTRANCE_MEDICAL_2024', 110.00, '体检费', '2024级', '2024-08-20', '2024级新生入学体检费'),
('新生报到费', 'REGISTRATION_2024', 45.00, '报到费', '2024级', '2024-08-25', '2024级新生报到手续费'),
('新生材料费', 'MATERIAL_2024', 75.00, '材料费', '2024级', '2024-09-05', '2024级新生学习材料费');

-- 显示基础数据插入完成信息
SELECT '基础数据插入完成！' AS result;
SELECT '角色数量:', COUNT(*) FROM tb_role;
SELECT '权限数量:', COUNT(*) FROM tb_permission;
SELECT '用户数量:', COUNT(*) FROM tb_user;
SELECT '班级数量:', COUNT(*) FROM tb_class;
SELECT '缴费项目数量:', COUNT(*) FROM tb_fee_item;

-- 按专业统计班级数量
SELECT
    CASE
        WHEN class_code LIKE 'CS%' THEN '计算机科学与技术'
        WHEN class_code LIKE 'SE%' THEN '软件工程'
        WHEN class_code LIKE 'IS%' THEN '信息安全'
        WHEN class_code LIKE 'DS%' THEN '数据科学与大数据技术'
        WHEN class_code LIKE 'AI%' THEN '人工智能'
        WHEN class_code LIKE 'IOT%' THEN '物联网工程'
        WHEN class_code LIKE 'NE%' THEN '网络工程'
        ELSE '其他'
    END AS major,
    COUNT(*) as class_count
FROM tb_class
GROUP BY
    CASE
        WHEN class_code LIKE 'CS%' THEN '计算机科学与技术'
        WHEN class_code LIKE 'SE%' THEN '软件工程'
        WHEN class_code LIKE 'IS%' THEN '信息安全'
        WHEN class_code LIKE 'DS%' THEN '数据科学与大数据技术'
        WHEN class_code LIKE 'AI%' THEN '人工智能'
        WHEN class_code LIKE 'IOT%' THEN '物联网工程'
        WHEN class_code LIKE 'NE%' THEN '网络工程'
        ELSE '其他'
    END
ORDER BY class_count DESC;