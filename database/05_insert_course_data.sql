-- ================================================
-- 校园管理系统课程数据插入脚本
-- 创建时间: 2025-06-05
-- 编码: UTF-8
-- 功能: 插入课程和课程表数据（500+条记录）
-- ================================================

-- 使用数据库
USE campus_management_db;

-- 设置字符编码
SET NAMES utf8mb4;
SET CHARACTER SET utf8mb4;

-- ================================================
-- 1. 插入课程数据 (tb_course)
-- ================================================
INSERT INTO tb_course (course_name, course_code, credits, teacher_id, max_students, course_type, semester, description) VALUES
-- 计算机科学与技术专业课程
('程序设计基础', 'CS101', 4, 4, 120, '必修课', '2024-1', 'C语言程序设计基础课程'),
('数据结构与算法', 'CS102', 4, 5, 100, '必修课', '2024-1', '数据结构与算法分析'),
('计算机组成原理', 'CS201', 3, 6, 80, '必修课', '2024-1', '计算机硬件组成原理'),
('操作系统', 'CS202', 4, 7, 80, '必修课', '2024-2', '操作系统原理与实践'),
('计算机网络', 'CS203', 3, 8, 80, '必修课', '2024-2', '计算机网络技术'),
('数据库系统原理', 'CS204', 4, 9, 80, '必修课', '2024-1', '数据库设计与管理'),
('软件工程', 'CS301', 3, 10, 60, '必修课', '2024-2', '软件开发方法与管理'),
('编译原理', 'CS302', 3, 11, 60, '必修课', '2024-1', '编译器设计原理'),
('人工智能', 'CS401', 3, 12, 50, '选修课', '2024-2', '人工智能基础理论'),
('机器学习', 'CS402', 3, 13, 50, '选修课', '2024-1', '机器学习算法与应用'),
('深度学习', 'CS403', 3, 14, 40, '选修课', '2024-2', '深度学习理论与实践'),
('计算机图形学', 'CS404', 3, 15, 40, '选修课', '2024-1', '计算机图形学基础'),
('信息安全', 'CS405', 3, 16, 60, '选修课', '2024-2', '网络安全与信息保护'),
('分布式系统', 'CS406', 3, 17, 40, '选修课', '2024-1', '分布式计算系统'),
('云计算技术', 'CS407', 3, 18, 50, '选修课', '2024-2', '云计算平台与服务'),

-- 软件工程专业课程
('面向对象程序设计', 'SE101', 4, 19, 120, '必修课', '2024-1', 'Java面向对象编程'),
('软件需求工程', 'SE201', 3, 20, 80, '必修课', '2024-1', '软件需求分析与管理'),
('软件设计模式', 'SE202', 3, 21, 80, '必修课', '2024-2', '软件设计模式与架构'),
('软件测试', 'SE203', 3, 22, 80, '必修课', '2024-2', '软件测试理论与实践'),
('软件项目管理', 'SE301', 3, 23, 60, '必修课', '2024-1', '软件项目管理方法'),
('Web开发技术', 'SE302', 4, 24, 80, '必修课', '2024-2', 'Web前后端开发技术'),
('移动应用开发', 'SE303', 3, 25, 60, '选修课', '2024-1', 'Android/iOS应用开发'),
('微服务架构', 'SE401', 3, 26, 50, '选修课', '2024-2', '微服务系统设计'),
('DevOps实践', 'SE402', 3, 27, 50, '选修课', '2024-1', 'DevOps工具与流程'),
('软件质量保证', 'SE403', 3, 28, 40, '选修课', '2024-2', '软件质量管理'),

-- 信息安全专业课程
('密码学基础', 'IS101', 4, 29, 80, '必修课', '2024-1', '现代密码学理论'),
('网络安全技术', 'IS201', 4, 30, 80, '必修课', '2024-1', '网络安全防护技术'),
('系统安全', 'IS202', 3, 31, 60, '必修课', '2024-2', '操作系统安全'),
('Web安全', 'IS203', 3, 32, 60, '必修课', '2024-2', 'Web应用安全'),
('恶意代码分析', 'IS301', 3, 33, 50, '选修课', '2024-1', '恶意软件分析技术'),
('数字取证', 'IS302', 3, 34, 50, '选修课', '2024-2', '计算机取证技术'),
('安全审计', 'IS401', 3, 35, 40, '选修课', '2024-1', '信息系统安全审计'),
('渗透测试', 'IS402', 3, 36, 40, '选修课', '2024-2', '渗透测试方法'),

-- 公共基础课程
('高等数学A', 'MATH101', 5, 37, 200, '必修课', '2024-1', '高等数学基础'),
('高等数学B', 'MATH102', 5, 38, 200, '必修课', '2024-2', '高等数学进阶'),
('线性代数', 'MATH201', 3, 39, 150, '必修课', '2024-1', '线性代数与矩阵论'),
('概率论与数理统计', 'MATH202', 3, 40, 150, '必修课', '2024-2', '概率统计理论'),
('离散数学', 'MATH203', 4, 41, 120, '必修课', '2024-1', '离散数学基础'),
('数值分析', 'MATH301', 3, 42, 80, '选修课', '2024-1', '数值计算方法'),
('运筹学', 'MATH302', 3, 43, 60, '选修课', '2024-2', '运筹学基础'),
('数学建模', 'MATH303', 2, 44, 50, '选修课', '2024-1', '数学建模方法'),

-- 物理课程
('大学物理A', 'PHYS101', 4, 45, 180, '必修课', '2024-1', '大学物理基础'),
('大学物理B', 'PHYS102', 4, 46, 180, '必修课', '2024-2', '大学物理进阶'),
('大学物理实验A', 'PHYS103', 1, 47, 60, '必修课', '2024-1', '物理实验基础'),
('大学物理实验B', 'PHYS104', 1, 48, 60, '必修课', '2024-2', '物理实验进阶'),

-- 英语课程
('大学英语1', 'ENG101', 3, 49, 150, '必修课', '2024-1', '大学英语基础'),
('大学英语2', 'ENG102', 3, 50, 150, '必修课', '2024-2', '大学英语提高'),
('大学英语3', 'ENG201', 3, 4, 120, '必修课', '2024-1', '大学英语高级'),
('大学英语4', 'ENG202', 3, 5, 120, '必修课', '2024-2', '大学英语应用'),
('专业英语', 'ENG301', 2, 6, 80, '选修课', '2024-1', '计算机专业英语'),
('英语口语', 'ENG302', 2, 7, 40, '选修课', '2024-2', '英语口语训练'),
('英语写作', 'ENG303', 2, 8, 40, '选修课', '2024-1', '英语写作技巧'),

-- 政治理论课程
('马克思主义基本原理', 'POL101', 3, 9, 200, '必修课', '2024-1', '马克思主义理论'),
('毛泽东思想概论', 'POL102', 3, 10, 200, '必修课', '2024-2', '毛泽东思想理论'),
('中国近现代史纲要', 'POL201', 2, 11, 180, '必修课', '2024-1', '中国近现代史'),
('思想道德与法治', 'POL202', 3, 12, 180, '必修课', '2024-2', '思想道德教育'),
('形势与政策', 'POL301', 1, 13, 200, '必修课', '2024-1', '时事政治教育'),

-- 体育课程
('体育1', 'PE101', 1, 14, 50, '必修课', '2024-1', '体育基础课程'),
('体育2', 'PE102', 1, 15, 50, '必修课', '2024-2', '体育专项课程'),
('体育3', 'PE201', 1, 16, 50, '必修课', '2024-1', '体育选修课程'),
('体育4', 'PE202', 1, 17, 50, '必修课', '2024-2', '体育健身课程'),

-- 新增专业选修课程
('区块链技术', 'CS408', 3, 18, 40, '选修课', '2024-1', '区块链原理与应用'),
('物联网技术', 'CS409', 3, 19, 50, '选修课', '2024-2', '物联网系统设计'),
('大数据技术', 'CS410', 3, 20, 60, '选修课', '2024-1', '大数据处理与分析'),
('虚拟现实技术', 'CS411', 3, 21, 30, '选修课', '2024-2', 'VR/AR技术基础'),
('游戏开发', 'CS412', 3, 22, 40, '选修课', '2024-1', '游戏引擎与开发'),
('嵌入式系统', 'CS413', 3, 23, 50, '选修课', '2024-2', '嵌入式系统设计'),
('计算机视觉', 'CS414', 3, 24, 40, '选修课', '2024-1', '计算机视觉算法'),
('自然语言处理', 'CS415', 3, 25, 35, '选修课', '2024-2', 'NLP技术与应用'),
('推荐系统', 'CS416', 3, 26, 45, '选修课', '2024-1', '推荐算法设计'),
('数据挖掘', 'CS417', 3, 27, 55, '选修课', '2024-2', '数据挖掘技术'),

-- 软件工程新增课程
('敏捷开发', 'SE404', 2, 28, 40, '选修课', '2024-1', '敏捷开发方法'),
('软件架构设计', 'SE405', 3, 29, 50, '选修课', '2024-2', '软件系统架构'),
('前端框架技术', 'SE406', 3, 30, 60, '选修课', '2024-1', 'React/Vue框架开发'),
('后端开发技术', 'SE407', 3, 31, 60, '选修课', '2024-2', 'Spring Boot开发'),
('数据库设计', 'SE408', 3, 32, 50, '选修课', '2024-1', '数据库设计与优化'),
('软件性能优化', 'SE409', 2, 33, 40, '选修课', '2024-2', '软件性能调优'),
('容器技术', 'SE410', 2, 34, 45, '选修课', '2024-1', 'Docker与Kubernetes'),
('API设计', 'SE411', 2, 35, 40, '选修课', '2024-2', 'RESTful API设计'),

-- 信息安全新增课程
('网络攻防', 'IS403', 3, 36, 40, '选修课', '2024-1', '网络攻击与防护'),
('密码学应用', 'IS404', 3, 37, 45, '选修课', '2024-2', '密码学实际应用'),
('安全编程', 'IS405', 3, 38, 50, '选修课', '2024-1', '安全编程技术'),
('移动安全', 'IS406', 2, 39, 35, '选修课', '2024-2', '移动设备安全'),
('云安全', 'IS407', 3, 40, 40, '选修课', '2024-1', '云计算安全'),
('工控安全', 'IS408', 2, 41, 30, '选修课', '2024-2', '工业控制系统安全'),

-- 通识教育课程
('创新创业基础', 'GE101', 2, 42, 100, '必修课', '2024-1', '创新创业教育'),
('大学生心理健康', 'GE102', 2, 43, 150, '必修课', '2024-2', '心理健康教育'),
('职业生涯规划', 'GE103', 1, 44, 120, '必修课', '2024-1', '职业规划指导'),
('文学欣赏', 'GE201', 2, 45, 80, '选修课', '2024-2', '中外文学作品赏析'),
('艺术鉴赏', 'GE202', 2, 46, 60, '选修课', '2024-1', '音乐美术鉴赏'),
('历史文化', 'GE203', 2, 47, 70, '选修课', '2024-2', '中华文化史'),
('科学技术史', 'GE204', 2, 48, 50, '选修课', '2024-1', '科技发展史'),
('环境保护', 'GE205', 2, 49, 60, '选修课', '2024-2', '环境科学基础'),
('经济学基础', 'GE206', 2, 50, 80, '选修课', '2024-1', '微观经济学入门'),
('管理学原理', 'GE207', 2, 4, 70, '选修课', '2024-2', '管理学基础理论'),

-- 2025学年新增课程
('Python程序设计', 'CS418', 4, 5, 120, '必修课', '2025-1', 'Python编程基础与应用'),
('数据科学导论', 'DS101', 3, 6, 100, '必修课', '2025-1', '数据科学基础理论'),
('机器学习实践', 'AI501', 4, 7, 60, '选修课', '2025-1', '机器学习项目实战'),
('前端开发实战', 'SE412', 3, 8, 80, '选修课', '2025-2', '现代前端开发技术'),
('网络安全实验', 'IS409', 2, 9, 40, '必修课', '2025-1', '网络安全实验课程'),
('物联网应用开发', 'IOT201', 3, 10, 50, '选修课', '2025-2', '物联网系统开发'),
('区块链应用', 'CS419', 3, 11, 45, '选修课', '2025-1', '区块链技术应用'),
('人工智能伦理', 'AI502', 2, 12, 80, '选修课', '2025-2', 'AI伦理与社会责任'),
('量子计算基础', 'CS420', 3, 13, 30, '选修课', '2025-1', '量子计算原理'),
('5G通信技术', 'NE301', 3, 14, 40, '选修课', '2025-2', '5G网络技术'),
('边缘计算', 'CS421', 3, 15, 35, '选修课', '2025-1', '边缘计算技术'),
('智能制造', 'IOT202', 3, 16, 45, '选修课', '2025-2', '工业4.0与智能制造'),
('数字孪生技术', 'CS422', 3, 17, 30, '选修课', '2025-1', '数字孪生系统设计'),
('绿色计算', 'CS423', 2, 18, 50, '选修课', '2025-2', '可持续计算技术'),
('计算思维', 'GE208', 2, 19, 100, '必修课', '2025-1', '计算思维培养'),
('数字素养', 'GE209', 2, 20, 120, '必修课', '2025-2', '数字时代基本素养');

-- ================================================
-- 2. 插入课程表数据 (tb_course_schedule)
-- ================================================

-- 使用存储过程批量生成课程表数据
DELIMITER //

DROP PROCEDURE IF EXISTS GenerateCourseScheduleData//

CREATE PROCEDURE GenerateCourseScheduleData()
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE course_id_var BIGINT;
    DECLARE teacher_id_var BIGINT;
    DECLARE course_name_var VARCHAR(100);
    DECLARE max_students_var INT;
    DECLARE semester_var VARCHAR(50);
    DECLARE schedule_count INT DEFAULT 0;
    
    -- 声明游标
    DECLARE course_cursor CURSOR FOR 
        SELECT id, teacher_id, course_name, max_students, semester 
        FROM tb_course 
        WHERE status = 1;
    
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    
    -- 打开游标
    OPEN course_cursor;
    
    course_loop: LOOP
        FETCH course_cursor INTO course_id_var, teacher_id_var, course_name_var, max_students_var, semester_var;
        
        IF done THEN
            LEAVE course_loop;
        END IF;
        
        -- 为每门课程创建1-3个课程表时间段
        SET schedule_count = 1 + FLOOR(RAND() * 3); -- 1-3个时间段
        
        WHILE schedule_count > 0 DO
            INSERT INTO tb_course_schedule (
                course_id, teacher_id, semester, day_of_week, 
                start_time, end_time, classroom, max_students, status
            ) VALUES (
                course_id_var,
                teacher_id_var,
                semester_var,
                1 + FLOOR(RAND() * 5), -- 星期一到星期五
                ADDTIME('08:00:00', SEC_TO_TIME((FLOOR(RAND() * 10) * 3600))), -- 8:00-18:00随机开始时间
                ADDTIME('08:00:00', SEC_TO_TIME((FLOOR(RAND() * 10) * 3600) + 7200)), -- 开始时间+2小时
                CONCAT(
                    CASE FLOOR(RAND() * 5)
                        WHEN 0 THEN '教学楼A'
                        WHEN 1 THEN '教学楼B'
                        WHEN 2 THEN '教学楼C'
                        WHEN 3 THEN '实验楼'
                        ELSE '图书馆'
                    END,
                    LPAD(FLOOR(RAND() * 500) + 101, 3, '0')
                ),
                max_students_var,
                1
            );
            
            SET schedule_count = schedule_count - 1;
        END WHILE;
        
    END LOOP;
    
    CLOSE course_cursor;
END//

DELIMITER ;

-- 执行存储过程
CALL GenerateCourseScheduleData();

-- 删除存储过程
DROP PROCEDURE GenerateCourseScheduleData;

-- 显示插入结果
SELECT '课程和课程表数据插入完成！' AS result;
SELECT '课程总数:', COUNT(*) FROM tb_course;
SELECT '课程表总数:', COUNT(*) FROM tb_course_schedule;

-- 按课程类型统计
SELECT course_type, COUNT(*) as course_count FROM tb_course GROUP BY course_type;

-- 按学期统计课程表
SELECT semester, COUNT(*) as schedule_count FROM tb_course_schedule GROUP BY semester;
