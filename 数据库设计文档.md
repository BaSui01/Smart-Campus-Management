# æ™ºæ…§æ ¡å›­ç®¡ç†å¹³å° - æ•°æ®åº“è®¾è®¡æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ•°æ®åº“æ¶æ„](#æ•°æ®åº“æ¶æ„)
3. [ç”¨æˆ·ç®¡ç†æ¨¡å—](#ç”¨æˆ·ç®¡ç†æ¨¡å—)
4. [æ•™åŠ¡ç®¡ç†æ¨¡å—](#æ•™åŠ¡ç®¡ç†æ¨¡å—)
5. [è€ƒè¯•ç®¡ç†æ¨¡å—](#è€ƒè¯•ç®¡ç†æ¨¡å—)
6. [è´¢åŠ¡ç®¡ç†æ¨¡å—](#è´¢åŠ¡ç®¡ç†æ¨¡å—)
7. [æ¶ˆæ¯é€šçŸ¥æ¨¡å—](#æ¶ˆæ¯é€šçŸ¥æ¨¡å—)
8. [ç³»ç»Ÿç®¡ç†æ¨¡å—](#ç³»ç»Ÿç®¡ç†æ¨¡å—)
9. [ç´¢å¼•ç­–ç•¥](#ç´¢å¼•ç­–ç•¥)
10. [è§†å›¾è®¾è®¡](#è§†å›¾è®¾è®¡)
11. [åˆå§‹åŒ–æ•°æ®](#åˆå§‹åŒ–æ•°æ®)
12. [æ•°æ®åº“éƒ¨ç½²](#æ•°æ®åº“éƒ¨ç½²)

## é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°ï¼š** æ™ºæ…§æ ¡å›­ç®¡ç†å¹³å°
**æ•°æ®åº“ç±»å‹ï¼š** MySQL 8.x
**å­—ç¬¦é›†ï¼š** utf8mb4
**æ’åºè§„åˆ™ï¼š** utf8mb4_unicode_ci

**æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼š**
- ç”¨æˆ·ç®¡ç†ï¼šå­¦ç”Ÿã€æ•™å¸ˆã€å®¶é•¿ã€ç®¡ç†å‘˜
- æ•™åŠ¡ç®¡ç†ï¼šè¯¾ç¨‹ã€ç­çº§ã€é€‰è¯¾ã€æˆç»©
- è€ƒè¯•ç®¡ç†ï¼šåœ¨çº¿è€ƒè¯•ã€é¢˜åº“ã€è‡ªåŠ¨æ‰¹æ”¹
- è´¢åŠ¡ç®¡ç†ï¼šå­¦è´¹ã€ç¼´è´¹è®°å½•ã€ç»Ÿè®¡
- æ¶ˆæ¯é€šçŸ¥ï¼šç«™å†…ä¿¡ã€é‚®ä»¶ã€å…¬å‘Š
- ç³»ç»Ÿç®¡ç†ï¼šæƒé™ã€é…ç½®ã€æ—¥å¿—

## æ•°æ®åº“æ¶æ„

### æ•´ä½“ ER å…³ç³»å›¾

```mermaid
erDiagram
    %% ç”¨æˆ·æ ¸å¿ƒè¡¨
    USER ||--o{ STUDENT : "å­¦ç”Ÿç”¨æˆ·"
    USER ||--o{ TEACHER : "æ•™å¸ˆç”¨æˆ·"
    USER ||--o{ PARENT : "å®¶é•¿ç”¨æˆ·"
    USER }|--|| ROLE : "ç”¨æˆ·è§’è‰²"

    %% å­¦ç”Ÿå’Œå®¶é•¿å…³ç³»
    STUDENT ||--o{ STUDENT_PARENT : "å­¦ç”Ÿå®¶é•¿å…³ç³»"
    PARENT ||--o{ STUDENT_PARENT : "å®¶é•¿å­¦ç”Ÿå…³ç³»"

    %% æ•™åŠ¡å…³ç³»
    TEACHER ||--o{ COURSE : "æ•™å¸ˆè¯¾ç¨‹"
    COURSE ||--o{ COURSE_SCHEDULE : "è¯¾ç¨‹å®‰æ’"
    CLASS ||--o{ STUDENT : "ç­çº§å­¦ç”Ÿ"
    STUDENT ||--o{ COURSE_SELECTION : "å­¦ç”Ÿé€‰è¯¾"
    STUDENT ||--o{ GRADE : "å­¦ç”Ÿæˆç»©"

    %% è€ƒè¯•å…³ç³»
    COURSE ||--o{ EXAM : "è¯¾ç¨‹è€ƒè¯•"
    EXAM ||--o{ EXAM_STUDENT : "è€ƒè¯•å­¦ç”Ÿ"
    QUESTION_BANK ||--o{ EXAM_QUESTION : "è€ƒè¯•é¢˜ç›®"
    EXAM_STUDENT ||--o{ EXAM_ANSWER : "å­¦ç”Ÿç­”é¢˜"

    %% è´¢åŠ¡å…³ç³»
    STUDENT ||--o{ PAYMENT_RECORD : "ç¼´è´¹è®°å½•"
    FEE_ITEM ||--o{ PAYMENT_RECORD : "ç¼´è´¹é¡¹ç›®"

    %% æ¶ˆæ¯å…³ç³»
    USER ||--o{ MESSAGE : "ç”¨æˆ·æ¶ˆæ¯"
    MESSAGE ||--o{ MESSAGE_READ : "æ¶ˆæ¯é˜…è¯»"
    USER ||--o{ ANNOUNCEMENT_TARGET : "å…¬å‘Šç›®æ ‡"

    %% ç³»ç»Ÿç®¡ç†
    USER ||--o{ OPERATION_LOG : "æ“ä½œæ—¥å¿—"
```

## ç”¨æˆ·ç®¡ç†æ¨¡å—

### 1. ç”¨æˆ·åŸºç¡€è¡¨ (tb_user)

```sql
CREATE TABLE tb_user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ç”¨æˆ·ID',
    username VARCHAR(50) NOT NULL UNIQUE COMMENT 'ç”¨æˆ·å',
    password VARCHAR(255) NOT NULL COMMENT 'å¯†ç ï¼ˆåŠ å¯†ï¼‰',
    email VARCHAR(100) UNIQUE COMMENT 'é‚®ç®±',
    phone VARCHAR(20) COMMENT 'æ‰‹æœºå·',
    real_name VARCHAR(50) COMMENT 'çœŸå®å§“å',
    avatar_url VARCHAR(255) COMMENT 'å¤´åƒURL',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ0-ç¦ç”¨',
    last_login_time DATETIME COMMENT 'æœ€åç™»å½•æ—¶é—´',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    INDEX idx_username (username),
    INDEX idx_email (email),
    INDEX idx_phone (phone)
) COMMENT='ç”¨æˆ·åŸºç¡€è¡¨';
```

### 2. è§’è‰²è¡¨ (tb_role)

```sql
CREATE TABLE tb_role (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'è§’è‰²ID',
    role_code VARCHAR(50) NOT NULL UNIQUE COMMENT 'è§’è‰²ç¼–ç ',
    role_name VARCHAR(100) NOT NULL COMMENT 'è§’è‰²åç§°',
    description VARCHAR(255) COMMENT 'è§’è‰²æè¿°',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ0-ç¦ç”¨',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´'
) COMMENT='è§’è‰²è¡¨';
```

### 3. ç”¨æˆ·è§’è‰²å…³è”è¡¨ (tb_user_role)

```sql
CREATE TABLE tb_user_role (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
    role_id BIGINT NOT NULL COMMENT 'è§’è‰²ID',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    FOREIGN KEY (user_id) REFERENCES tb_user(id) ON DELETE CASCADE,
    FOREIGN KEY (role_id) REFERENCES tb_role(id) ON DELETE CASCADE,
    UNIQUE KEY uk_user_role (user_id, role_id)
) COMMENT='ç”¨æˆ·è§’è‰²å…³è”è¡¨';
```

### 4. å­¦ç”Ÿè¡¨ (tb_student)

```sql
CREATE TABLE tb_student (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'å­¦ç”ŸID',
    user_id BIGINT NOT NULL UNIQUE COMMENT 'ç”¨æˆ·ID',
    student_no VARCHAR(50) NOT NULL UNIQUE COMMENT 'å­¦å·',
    grade VARCHAR(20) COMMENT 'å¹´çº§',
    class_id BIGINT COMMENT 'ç­çº§ID',
    enrollment_date DATE COMMENT 'å…¥å­¦æ—¥æœŸ',
    graduation_date DATE COMMENT 'æ¯•ä¸šæ—¥æœŸ',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-åœ¨è¯»ï¼Œ2-æ¯•ä¸šï¼Œ3-ä¼‘å­¦ï¼Œ0-é€€å­¦',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (user_id) REFERENCES tb_user(id) ON DELETE CASCADE,
    INDEX idx_student_no (student_no),
    INDEX idx_class_id (class_id)
) COMMENT='å­¦ç”Ÿè¡¨';
```

### 5. æ•™å¸ˆè¡¨ (tb_teacher)

```sql
CREATE TABLE tb_teacher (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æ•™å¸ˆID',
    user_id BIGINT NOT NULL UNIQUE COMMENT 'ç”¨æˆ·ID',
    teacher_no VARCHAR(50) NOT NULL UNIQUE COMMENT 'æ•™å¸ˆå·¥å·',
    department VARCHAR(100) COMMENT 'æ‰€å±éƒ¨é—¨',
    title VARCHAR(50) COMMENT 'èŒç§°',
    hire_date DATE COMMENT 'å…¥èŒæ—¥æœŸ',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-åœ¨èŒï¼Œ0-ç¦»èŒ',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (user_id) REFERENCES tb_user(id) ON DELETE CASCADE,
    INDEX idx_teacher_no (teacher_no)
) COMMENT='æ•™å¸ˆè¡¨';
```

### 6. å®¶é•¿è¡¨ (tb_parent)

```sql
CREATE TABLE tb_parent (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'å®¶é•¿ID',
    user_id BIGINT NOT NULL UNIQUE COMMENT 'ç”¨æˆ·ID',
    relationship VARCHAR(20) COMMENT 'ä¸å­¦ç”Ÿå…³ç³»',
    occupation VARCHAR(100) COMMENT 'èŒä¸š',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (user_id) REFERENCES tb_user(id) ON DELETE CASCADE
) COMMENT='å®¶é•¿è¡¨';
```

### 7. å­¦ç”Ÿå®¶é•¿å…³è”è¡¨ (tb_student_parent)

```sql
CREATE TABLE tb_student_parent (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    student_id BIGINT NOT NULL COMMENT 'å­¦ç”ŸID',
    parent_id BIGINT NOT NULL COMMENT 'å®¶é•¿ID',
    relationship VARCHAR(20) COMMENT 'å…³ç³»',
    is_primary TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦ä¸»è¦è”ç³»äººï¼š1-æ˜¯ï¼Œ0-å¦',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    FOREIGN KEY (student_id) REFERENCES tb_student(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_id) REFERENCES tb_parent(id) ON DELETE CASCADE,
    UNIQUE KEY uk_student_parent (student_id, parent_id)
) COMMENT='å­¦ç”Ÿå®¶é•¿å…³è”è¡¨';
```

## æ•™åŠ¡ç®¡ç†æ¨¡å—

### 8. ç­çº§è¡¨ (tb_class)

```sql
CREATE TABLE tb_class (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ç­çº§ID',
    class_name VARCHAR(100) NOT NULL COMMENT 'ç­çº§åç§°',
    class_no VARCHAR(50) NOT NULL UNIQUE COMMENT 'ç­çº§ç¼–å·',
    grade VARCHAR(20) COMMENT 'å¹´çº§',
    head_teacher_id BIGINT COMMENT 'ç­ä¸»ä»»ID',
    max_students INT DEFAULT 50 COMMENT 'æœ€å¤§å­¦ç”Ÿæ•°',
    current_students INT DEFAULT 0 COMMENT 'å½“å‰å­¦ç”Ÿæ•°',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ0-åœç”¨',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (head_teacher_id) REFERENCES tb_teacher(id),
    INDEX idx_class_no (class_no),
    INDEX idx_grade (grade)
) COMMENT='ç­çº§è¡¨';
```

### 9. è¯¾ç¨‹è¡¨ (tb_course)

```sql
CREATE TABLE tb_course (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'è¯¾ç¨‹ID',
    course_code VARCHAR(50) NOT NULL UNIQUE COMMENT 'è¯¾ç¨‹ç¼–ç ',
    course_name VARCHAR(100) NOT NULL COMMENT 'è¯¾ç¨‹åç§°',
    credits DECIMAL(3,1) COMMENT 'å­¦åˆ†',
    course_type VARCHAR(20) COMMENT 'è¯¾ç¨‹ç±»å‹ï¼šå¿…ä¿®/é€‰ä¿®',
    department VARCHAR(100) COMMENT 'å¼€è¯¾éƒ¨é—¨',
    description TEXT COMMENT 'è¯¾ç¨‹æè¿°',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-å¼€è¯¾ï¼Œ0-åœè¯¾',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    INDEX idx_course_code (course_code),
    INDEX idx_course_type (course_type)
) COMMENT='è¯¾ç¨‹è¡¨';
```

### 10. è¯¾ç¨‹å®‰æ’è¡¨ (tb_course_schedule)

```sql
CREATE TABLE tb_course_schedule (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    course_id BIGINT NOT NULL COMMENT 'è¯¾ç¨‹ID',
    teacher_id BIGINT NOT NULL COMMENT 'æ•™å¸ˆID',
    class_id BIGINT COMMENT 'ç­çº§IDï¼ˆå¯ä¸ºç©ºï¼Œè¡¨ç¤ºé€‰ä¿®è¯¾ï¼‰',
    semester VARCHAR(20) NOT NULL COMMENT 'å­¦æœŸ',
    day_of_week TINYINT COMMENT 'æ˜ŸæœŸå‡ ï¼š1-7',
    start_time TIME COMMENT 'å¼€å§‹æ—¶é—´',
    end_time TIME COMMENT 'ç»“æŸæ—¶é—´',
    classroom VARCHAR(50) COMMENT 'æ•™å®¤',
    max_students INT COMMENT 'æœ€å¤§é€‰è¯¾äººæ•°',
    current_students INT DEFAULT 0 COMMENT 'å½“å‰é€‰è¯¾äººæ•°',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-æ­£å¸¸ï¼Œ0-å–æ¶ˆ',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (course_id) REFERENCES tb_course(id),
    FOREIGN KEY (teacher_id) REFERENCES tb_teacher(id),
    FOREIGN KEY (class_id) REFERENCES tb_class(id),
    INDEX idx_semester (semester),
    INDEX idx_day_time (day_of_week, start_time)
) COMMENT='è¯¾ç¨‹å®‰æ’è¡¨';
```

### 11. é€‰è¯¾è®°å½•è¡¨ (tb_course_selection)

```sql
CREATE TABLE tb_course_selection (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    student_id BIGINT NOT NULL COMMENT 'å­¦ç”ŸID',
    schedule_id BIGINT NOT NULL COMMENT 'è¯¾ç¨‹å®‰æ’ID',
    selection_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'é€‰è¯¾æ—¶é—´',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-å·²é€‰ï¼Œ2-å·²é€€è¯¾',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (student_id) REFERENCES tb_student(id) ON DELETE CASCADE,
    FOREIGN KEY (schedule_id) REFERENCES tb_course_schedule(id),
    UNIQUE KEY uk_student_schedule (student_id, schedule_id)
) COMMENT='é€‰è¯¾è®°å½•è¡¨';
```

### 12. æˆç»©è¡¨ (tb_grade)

```sql
CREATE TABLE tb_grade (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æˆç»©ID',
    student_id BIGINT NOT NULL COMMENT 'å­¦ç”ŸID',
    course_id BIGINT NOT NULL COMMENT 'è¯¾ç¨‹ID',
    semester VARCHAR(20) NOT NULL COMMENT 'å­¦æœŸ',
    usual_score DECIMAL(5,2) COMMENT 'å¹³æ—¶æˆç»©',
    exam_score DECIMAL(5,2) COMMENT 'è€ƒè¯•æˆç»©',
    final_score DECIMAL(5,2) COMMENT 'æ€»æˆç»©',
    grade_level VARCHAR(5) COMMENT 'ç­‰çº§ï¼šA/B/C/D/F',
    is_pass TINYINT COMMENT 'æ˜¯å¦é€šè¿‡ï¼š1-é€šè¿‡ï¼Œ0-ä¸é€šè¿‡',
    teacher_id BIGINT COMMENT 'å½•å…¥æ•™å¸ˆID',
    remarks TEXT COMMENT 'å¤‡æ³¨',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (student_id) REFERENCES tb_student(id) ON DELETE CASCADE,
    FOREIGN KEY (course_id) REFERENCES tb_course(id),
    FOREIGN KEY (teacher_id) REFERENCES tb_teacher(id),
    UNIQUE KEY uk_student_course_semester (student_id, course_id, semester),
    INDEX idx_semester (semester),
    INDEX idx_final_score (final_score)
) COMMENT='æˆç»©è¡¨';
```

## è€ƒè¯•ç®¡ç†æ¨¡å—

### 13. è€ƒè¯•è¡¨ (tb_exam)

```sql
CREATE TABLE tb_exam (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'è€ƒè¯•ID',
    exam_name VARCHAR(200) NOT NULL COMMENT 'è€ƒè¯•åç§°',
    exam_code VARCHAR(50) NOT NULL UNIQUE COMMENT 'è€ƒè¯•ç¼–ç ',
    course_id BIGINT NOT NULL COMMENT 'è¯¾ç¨‹ID',
    exam_type VARCHAR(20) NOT NULL COMMENT 'è€ƒè¯•ç±»å‹ï¼šæœŸä¸­/æœŸæœ«/éšå ‚/è¡¥è€ƒ',
    semester VARCHAR(20) NOT NULL COMMENT 'å­¦æœŸ',
    exam_date DATE NOT NULL COMMENT 'è€ƒè¯•æ—¥æœŸ',
    start_time TIME NOT NULL COMMENT 'å¼€å§‹æ—¶é—´',
    end_time TIME NOT NULL COMMENT 'ç»“æŸæ—¶é—´',
    duration INT NOT NULL COMMENT 'è€ƒè¯•æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰',
    total_score DECIMAL(5,2) DEFAULT 100.00 COMMENT 'æ€»åˆ†',
    pass_score DECIMAL(5,2) DEFAULT 60.00 COMMENT 'åŠæ ¼åˆ†æ•°',
    exam_mode VARCHAR(20) DEFAULT 'OFFLINE' COMMENT 'è€ƒè¯•æ¨¡å¼ï¼šONLINE-åœ¨çº¿/OFFLINE-çº¿ä¸‹',
    exam_status VARCHAR(20) DEFAULT 'DRAFT' COMMENT 'è€ƒè¯•çŠ¶æ€ï¼šDRAFT-è‰ç¨¿/PUBLISHED-å·²å‘å¸ƒ/ONGOING-è¿›è¡Œä¸­/FINISHED-å·²ç»“æŸ',
    teacher_id BIGINT COMMENT 'å‡ºé¢˜æ•™å¸ˆID',
    description TEXT COMMENT 'è€ƒè¯•è¯´æ˜',
    exam_rules TEXT COMMENT 'è€ƒè¯•è§„åˆ™',
    allow_late_submit TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦å…è®¸è¿Ÿäº¤ï¼š1-æ˜¯ï¼Œ0-å¦',
    late_submit_penalty DECIMAL(3,2) DEFAULT 0.00 COMMENT 'è¿Ÿäº¤æ‰£åˆ†æ¯”ä¾‹',
    shuffle_questions TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦æ‰“ä¹±é¢˜ç›®é¡ºåºï¼š1-æ˜¯ï¼Œ0-å¦',
    shuffle_options TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦æ‰“ä¹±é€‰é¡¹é¡ºåºï¼š1-æ˜¯ï¼Œ0-å¦',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (course_id) REFERENCES tb_course(id),
    FOREIGN KEY (teacher_id) REFERENCES tb_teacher(id),
    INDEX idx_exam_code (exam_code),
    INDEX idx_course_id (course_id),
    INDEX idx_exam_date (exam_date),
    INDEX idx_semester (semester),
    INDEX idx_exam_status (exam_status)
) COMMENT='è€ƒè¯•è¡¨';
```

### 14. é¢˜åº“è¡¨ (tb_question_bank)

```sql
CREATE TABLE tb_question_bank (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'é¢˜ç›®ID',
    question_code VARCHAR(50) UNIQUE COMMENT 'é¢˜ç›®ç¼–ç ',
    course_id BIGINT NOT NULL COMMENT 'è¯¾ç¨‹ID',
    chapter VARCHAR(100) COMMENT 'æ‰€å±ç« èŠ‚',
    question_type VARCHAR(20) NOT NULL COMMENT 'é¢˜ç›®ç±»å‹ï¼šSINGLE-å•é€‰/MULTIPLE-å¤šé€‰/JUDGE-åˆ¤æ–­/FILL-å¡«ç©º/ESSAY-é—®ç­”',
    difficulty_level VARCHAR(10) NOT NULL COMMENT 'éš¾åº¦ç­‰çº§ï¼šEASY-ç®€å•/MEDIUM-ä¸­ç­‰/HARD-å›°éš¾',
    question_content TEXT NOT NULL COMMENT 'é¢˜ç›®å†…å®¹',
    option_a VARCHAR(500) COMMENT 'é€‰é¡¹A',
    option_b VARCHAR(500) COMMENT 'é€‰é¡¹B',
    option_c VARCHAR(500) COMMENT 'é€‰é¡¹C',
    option_d VARCHAR(500) COMMENT 'é€‰é¡¹D',
    correct_answer TEXT NOT NULL COMMENT 'æ­£ç¡®ç­”æ¡ˆ',
    answer_analysis TEXT COMMENT 'ç­”æ¡ˆè§£æ',
    score DECIMAL(4,2) DEFAULT 1.00 COMMENT 'é¢˜ç›®åˆ†å€¼',
    usage_count INT DEFAULT 0 COMMENT 'ä½¿ç”¨æ¬¡æ•°',
    creator_id BIGINT COMMENT 'åˆ›å»ºè€…ID',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-å¯ç”¨ï¼Œ0-ç¦ç”¨',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (course_id) REFERENCES tb_course(id),
    FOREIGN KEY (creator_id) REFERENCES tb_teacher(id),
    INDEX idx_question_code (question_code),
    INDEX idx_course_id (course_id),
    INDEX idx_question_type (question_type),
    INDEX idx_difficulty_level (difficulty_level),
    INDEX idx_chapter (chapter)
) COMMENT='é¢˜åº“è¡¨';
```

## è´¢åŠ¡ç®¡ç†æ¨¡å—

### 15. ç¼´è´¹é¡¹ç›®è¡¨ (tb_fee_item)

```sql
CREATE TABLE tb_fee_item (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ç¼´è´¹é¡¹ç›®ID',
    item_name VARCHAR(100) NOT NULL COMMENT 'é¡¹ç›®åç§°',
    item_code VARCHAR(50) NOT NULL UNIQUE COMMENT 'é¡¹ç›®ç¼–ç ',
    amount DECIMAL(10,2) NOT NULL COMMENT 'é‡‘é¢',
    fee_type VARCHAR(20) COMMENT 'è´¹ç”¨ç±»å‹ï¼šå­¦è´¹/æ‚è´¹/ä¹¦è´¹ç­‰',
    applicable_grade VARCHAR(50) COMMENT 'é€‚ç”¨å¹´çº§',
    due_date DATE COMMENT 'ç¼´è´¹æˆªæ­¢æ—¥æœŸ',
    description TEXT COMMENT 'é¡¹ç›®æè¿°',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-å¯ç”¨ï¼Œ0-åœç”¨',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    INDEX idx_item_code (item_code),
    INDEX idx_fee_type (fee_type)
) COMMENT='ç¼´è´¹é¡¹ç›®è¡¨';
```

### 16. ç¼´è´¹è®°å½•è¡¨ (tb_payment_record)

```sql
CREATE TABLE tb_payment_record (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ç¼´è´¹è®°å½•ID',
    student_id BIGINT NOT NULL COMMENT 'å­¦ç”ŸID',
    fee_item_id BIGINT NOT NULL COMMENT 'ç¼´è´¹é¡¹ç›®ID',
    amount DECIMAL(10,2) NOT NULL COMMENT 'ç¼´è´¹é‡‘é¢',
    payment_method VARCHAR(20) COMMENT 'ç¼´è´¹æ–¹å¼ï¼šç°é‡‘/é“¶è¡Œå¡/æ”¯ä»˜å®/å¾®ä¿¡',
    payment_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'ç¼´è´¹æ—¶é—´',
    transaction_no VARCHAR(100) COMMENT 'äº¤æ˜“æµæ°´å·',
    operator_id BIGINT COMMENT 'æ“ä½œå‘˜ID',
    remarks TEXT COMMENT 'å¤‡æ³¨',
    status TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š1-æˆåŠŸï¼Œ2-é€€æ¬¾ï¼Œ0-å¤±è´¥',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (student_id) REFERENCES tb_student(id),
    FOREIGN KEY (fee_item_id) REFERENCES tb_fee_item(id),
    INDEX idx_student_id (student_id),
    INDEX idx_payment_time (payment_time),
    INDEX idx_transaction_no (transaction_no)
) COMMENT='ç¼´è´¹è®°å½•è¡¨';
```

## æ¶ˆæ¯é€šçŸ¥æ¨¡å—

### 17. æ¶ˆæ¯æ¨¡æ¿è¡¨ (tb_message_template)

```sql
CREATE TABLE tb_message_template (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æ¨¡æ¿ID',
    template_code VARCHAR(50) NOT NULL UNIQUE COMMENT 'æ¨¡æ¿ç¼–ç ',
    template_name VARCHAR(100) NOT NULL COMMENT 'æ¨¡æ¿åç§°',
    template_type VARCHAR(20) NOT NULL COMMENT 'æ¨¡æ¿ç±»å‹ï¼šSYSTEM-ç³»ç»Ÿ/CUSTOM-è‡ªå®šä¹‰',
    message_type VARCHAR(20) NOT NULL COMMENT 'æ¶ˆæ¯ç±»å‹ï¼šNOTICE-é€šçŸ¥/REMINDER-æé†’/WARNING-è­¦å‘Š/ANNOUNCEMENT-å…¬å‘Š',
    title_template VARCHAR(200) NOT NULL COMMENT 'æ ‡é¢˜æ¨¡æ¿',
    content_template TEXT NOT NULL COMMENT 'å†…å®¹æ¨¡æ¿',
    variables JSON COMMENT 'æ¨¡æ¿å˜é‡å®šä¹‰ï¼ˆJSONæ ¼å¼ï¼‰',
    send_channels JSON COMMENT 'å‘é€æ¸ é“ï¼š["SYSTEM","EMAIL","SMS"]',
    is_enabled TINYINT DEFAULT 1 COMMENT 'æ˜¯å¦å¯ç”¨ï¼š1-æ˜¯ï¼Œ0-å¦',
    creator_id BIGINT COMMENT 'åˆ›å»ºè€…ID',
    description TEXT COMMENT 'æ¨¡æ¿æè¿°',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (creator_id) REFERENCES tb_user(id),
    INDEX idx_template_code (template_code),
    INDEX idx_template_type (template_type),
    INDEX idx_message_type (message_type)
) COMMENT='æ¶ˆæ¯æ¨¡æ¿è¡¨';
```

### 18. æ¶ˆæ¯è¡¨ (tb_message)

```sql
CREATE TABLE tb_message (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æ¶ˆæ¯ID',
    message_code VARCHAR(50) UNIQUE COMMENT 'æ¶ˆæ¯ç¼–ç ',
    template_id BIGINT COMMENT 'æ¨¡æ¿ID',
    sender_id BIGINT COMMENT 'å‘é€è€…ID',
    sender_type VARCHAR(20) DEFAULT 'USER' COMMENT 'å‘é€è€…ç±»å‹ï¼šUSER-ç”¨æˆ·/SYSTEM-ç³»ç»Ÿ',
    title VARCHAR(200) NOT NULL COMMENT 'æ¶ˆæ¯æ ‡é¢˜',
    content TEXT NOT NULL COMMENT 'æ¶ˆæ¯å†…å®¹',
    message_type VARCHAR(20) NOT NULL COMMENT 'æ¶ˆæ¯ç±»å‹ï¼šNOTICE-é€šçŸ¥/REMINDER-æé†’/WARNING-è­¦å‘Š/ANNOUNCEMENT-å…¬å‘Š',
    priority_level VARCHAR(10) DEFAULT 'NORMAL' COMMENT 'ä¼˜å…ˆçº§ï¼šLOW-ä½/NORMAL-æ™®é€š/HIGH-é«˜/URGENT-ç´§æ€¥',
    send_method VARCHAR(20) DEFAULT 'SYSTEM' COMMENT 'å‘é€æ–¹å¼ï¼šSYSTEM-ç«™å†…ä¿¡/EMAIL-é‚®ä»¶/SMS-çŸ­ä¿¡/ALL-å…¨éƒ¨',
    target_type VARCHAR(20) NOT NULL COMMENT 'ç›®æ ‡ç±»å‹ï¼šUSER-æŒ‡å®šç”¨æˆ·/ROLE-è§’è‰²/CLASS-ç­çº§/GRADE-å¹´çº§/ALL-å…¨éƒ¨',
    target_users TEXT COMMENT 'ç›®æ ‡ç”¨æˆ·IDåˆ—è¡¨ï¼ˆJSONæ ¼å¼ï¼‰',
    scheduled_time DATETIME COMMENT 'å®šæ—¶å‘é€æ—¶é—´',
    sent_time DATETIME COMMENT 'å®é™…å‘é€æ—¶é—´',
    expire_time DATETIME COMMENT 'è¿‡æœŸæ—¶é—´',
    status VARCHAR(20) DEFAULT 'DRAFT' COMMENT 'çŠ¶æ€ï¼šDRAFT-è‰ç¨¿/SCHEDULED-å®šæ—¶/SENDING-å‘é€ä¸­/SENT-å·²å‘é€/FAILED-å¤±è´¥/CANCELLED-å·²å–æ¶ˆ',
    total_recipients INT DEFAULT 0 COMMENT 'æ€»æ¥æ”¶äººæ•°',
    sent_count INT DEFAULT 0 COMMENT 'å·²å‘é€æ•°é‡',
    read_count INT DEFAULT 0 COMMENT 'å·²é˜…è¯»æ•°é‡',
    is_top TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦ç½®é¡¶ï¼š1-æ˜¯ï¼Œ0-å¦',
    allow_reply TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦å…è®¸å›å¤ï¼š1-æ˜¯ï¼Œ0-å¦',
    business_type VARCHAR(50) COMMENT 'ä¸šåŠ¡ç±»å‹ï¼šCOURSE-è¯¾ç¨‹/EXAM-è€ƒè¯•/PAYMENT-ç¼´è´¹/GRADE-æˆç»©ç­‰',
    business_id BIGINT COMMENT 'å…³è”ä¸šåŠ¡ID',
    extra_data JSON COMMENT 'æ‰©å±•æ•°æ®',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (template_id) REFERENCES tb_message_template(id),
    FOREIGN KEY (sender_id) REFERENCES tb_user(id),
    INDEX idx_message_code (message_code),
    INDEX idx_sender_id (sender_id),
    INDEX idx_message_type (message_type),
    INDEX idx_status (status),
    INDEX idx_scheduled_time (scheduled_time),
    INDEX idx_business_type_id (business_type, business_id),
    INDEX idx_created_time (created_time)
) COMMENT='æ¶ˆæ¯è¡¨';
```

### 19. æ¶ˆæ¯é˜…è¯»çŠ¶æ€è¡¨ (tb_message_read)

```sql
CREATE TABLE tb_message_read (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    message_id BIGINT NOT NULL COMMENT 'æ¶ˆæ¯ID',
    user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
    is_read TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦å·²è¯»ï¼š1-æ˜¯ï¼Œ0-å¦',
    read_time DATETIME COMMENT 'é˜…è¯»æ—¶é—´',
    is_starred TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦æ”¶è—ï¼š1-æ˜¯ï¼Œ0-å¦',
    is_deleted TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦åˆ é™¤ï¼š1-æ˜¯ï¼Œ0-å¦',
    delete_time DATETIME COMMENT 'åˆ é™¤æ—¶é—´',
    reply_content TEXT COMMENT 'å›å¤å†…å®¹',
    reply_time DATETIME COMMENT 'å›å¤æ—¶é—´',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    FOREIGN KEY (message_id) REFERENCES tb_message(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES tb_user(id) ON DELETE CASCADE,
    UNIQUE KEY uk_message_user (message_id, user_id),
    INDEX idx_user_id (user_id),
    INDEX idx_is_read (is_read),
    INDEX idx_is_starred (is_starred),
    INDEX idx_is_deleted (is_deleted)
) COMMENT='æ¶ˆæ¯é˜…è¯»çŠ¶æ€è¡¨';
```

## ç³»ç»Ÿç®¡ç†æ¨¡å—

### 20. ç³»ç»Ÿé…ç½®è¡¨ (tb_system_config)

```sql
CREATE TABLE tb_system_config (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'é…ç½®ID',
    config_key VARCHAR(100) NOT NULL UNIQUE COMMENT 'é…ç½®é”®',
    config_value TEXT COMMENT 'é…ç½®å€¼',
    config_desc VARCHAR(255) COMMENT 'é…ç½®æè¿°',
    config_type VARCHAR(20) DEFAULT 'STRING' COMMENT 'é…ç½®ç±»å‹ï¼šSTRING/INT/BOOLEAN/JSON',
    is_system TINYINT DEFAULT 0 COMMENT 'æ˜¯å¦ç³»ç»Ÿé…ç½®ï¼š1-æ˜¯ï¼Œ0-å¦',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    INDEX idx_config_key (config_key)
) COMMENT='ç³»ç»Ÿé…ç½®è¡¨';
```

### 21. æ“ä½œæ—¥å¿—è¡¨ (tb_operation_log)

```sql
CREATE TABLE tb_operation_log (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'æ—¥å¿—ID',
    user_id BIGINT COMMENT 'æ“ä½œç”¨æˆ·ID',
    username VARCHAR(50) COMMENT 'ç”¨æˆ·å',
    operation VARCHAR(100) COMMENT 'æ“ä½œå†…å®¹',
    method VARCHAR(200) COMMENT 'è¯·æ±‚æ–¹æ³•',
    params TEXT COMMENT 'è¯·æ±‚å‚æ•°',
    ip_address VARCHAR(50) COMMENT 'IPåœ°å€',
    user_agent VARCHAR(500) COMMENT 'ç”¨æˆ·ä»£ç†',
    execution_time BIGINT COMMENT 'æ‰§è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰',
    status TINYINT COMMENT 'æ“ä½œçŠ¶æ€ï¼š1-æˆåŠŸï¼Œ0-å¤±è´¥',
    error_msg TEXT COMMENT 'é”™è¯¯ä¿¡æ¯',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    INDEX idx_user_id (user_id),
    INDEX idx_created_time (created_time),
    INDEX idx_operation (operation)
) COMMENT='æ“ä½œæ—¥å¿—è¡¨';
```

## ç´¢å¼•ç­–ç•¥

### ä¸»è¦ç´¢å¼•è®¾è®¡åŸåˆ™

1. **ä¸»é”®ç´¢å¼•ï¼š** æ‰€æœ‰è¡¨éƒ½æœ‰è‡ªå¢ä¸»é”® `id`
2. **å”¯ä¸€ç´¢å¼•ï¼š** ç”¨æˆ·åã€é‚®ç®±ã€å­¦å·ã€å·¥å·ç­‰å”¯ä¸€å­—æ®µ
3. **å¤–é”®ç´¢å¼•ï¼š** æ‰€æœ‰å¤–é”®å­—æ®µéƒ½å»ºç«‹ç´¢å¼•
4. **æŸ¥è¯¢ç´¢å¼•ï¼š** æ ¹æ®å¸¸ç”¨æŸ¥è¯¢æ¡ä»¶å»ºç«‹å•åˆ—æˆ–å¤åˆç´¢å¼•
5. **æ—¶é—´ç´¢å¼•ï¼š** åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰æ—¶é—´å­—æ®µ

### å¤åˆç´¢å¼•ç¤ºä¾‹

```sql
-- å­¦ç”Ÿæˆç»©æŸ¥è¯¢å¤åˆç´¢å¼•
ALTER TABLE tb_grade ADD INDEX idx_student_semester_course (student_id, semester, course_id);

-- æ¶ˆæ¯æŸ¥è¯¢å¤åˆç´¢å¼•
ALTER TABLE tb_message ADD INDEX idx_target_status_time (target_type, status, created_time);

-- è€ƒè¯•å®‰æ’æŸ¥è¯¢å¤åˆç´¢å¼•
ALTER TABLE tb_course_schedule ADD INDEX idx_semester_day_time (semester, day_of_week, start_time);

-- ç¼´è´¹è®°å½•æŸ¥è¯¢å¤åˆç´¢å¼•
ALTER TABLE tb_payment_record ADD INDEX idx_student_time_status (student_id, payment_time, status);
```

## è§†å›¾è®¾è®¡

### 1. å­¦ç”Ÿä¿¡æ¯æ¦‚è§ˆè§†å›¾

```sql
CREATE VIEW v_student_overview AS
SELECT
    s.id,
    s.student_no,
    u.real_name,
    u.email,
    u.phone,
    s.grade,
    c.class_name,
    c.class_no,
    tu.real_name as head_teacher_name,
    s.enrollment_date,
    s.status as student_status
FROM tb_student s
JOIN tb_user u ON s.user_id = u.id
LEFT JOIN tb_class c ON s.class_id = c.id
LEFT JOIN tb_teacher t ON c.head_teacher_id = t.id
LEFT JOIN tb_user tu ON t.user_id = tu.id;
```

### 2. æ•™å¸ˆè¯¾ç¨‹å®‰æ’è§†å›¾

```sql
CREATE VIEW v_teacher_schedule AS
SELECT
    cs.id,
    t.teacher_no,
    tu.real_name as teacher_name,
    c.course_code,
    c.course_name,
    cs.semester,
    cs.day_of_week,
    cs.start_time,
    cs.end_time,
    cs.classroom,
    cl.class_name,
    cs.current_students,
    cs.max_students
FROM tb_course_schedule cs
JOIN tb_teacher t ON cs.teacher_id = t.id
JOIN tb_user tu ON t.user_id = tu.id
JOIN tb_course c ON cs.course_id = c.id
LEFT JOIN tb_class cl ON cs.class_id = cl.id
WHERE cs.status = 1;
```

## åˆå§‹åŒ–æ•°æ®

### 1. åŸºç¡€è§’è‰²æ•°æ®

```sql
INSERT INTO tb_role (role_code, role_name, description) VALUES
('ADMIN', 'ç³»ç»Ÿç®¡ç†å‘˜', 'ç³»ç»Ÿç®¡ç†å‘˜è§’è‰²ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™'),
('TEACHER', 'æ•™å¸ˆ', 'æ•™å¸ˆè§’è‰²ï¼Œè´Ÿè´£æ•™å­¦ç®¡ç†'),
('STUDENT', 'å­¦ç”Ÿ', 'å­¦ç”Ÿè§’è‰²ï¼Œè¿›è¡Œå­¦ä¹ æ´»åŠ¨'),
('PARENT', 'å®¶é•¿', 'å®¶é•¿è§’è‰²ï¼Œå…³æ³¨å­¦ç”ŸåŠ¨æ€');
```

### 2. ç³»ç»Ÿé…ç½®æ•°æ®

```sql
INSERT INTO tb_system_config (config_key, config_value, config_desc, config_type, is_system) VALUES
('system.name', 'æ™ºæ…§æ ¡å›­ç®¡ç†å¹³å°', 'ç³»ç»Ÿåç§°', 'STRING', 1),
('system.version', '1.0.0', 'ç³»ç»Ÿç‰ˆæœ¬', 'STRING', 1),
('course.max_selection', '10', 'å­¦ç”Ÿæœ€å¤§é€‰è¯¾æ•°é‡', 'INT', 1),
('email.enabled', 'true', 'é‚®ä»¶åŠŸèƒ½æ˜¯å¦å¯ç”¨', 'BOOLEAN', 1),
('session.timeout', '7200', 'ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰', 'INT', 1);
```

### 3. æ¶ˆæ¯æ¨¡æ¿æ•°æ®

```sql
INSERT INTO tb_message_template (template_code, template_name, template_type, message_type, title_template, content_template, variables, send_channels) VALUES
('GRADE_PUBLISHED', 'æˆç»©å‘å¸ƒé€šçŸ¥', 'SYSTEM', 'NOTICE', '${courseName}æˆç»©å·²å‘å¸ƒ', 'æ‚¨å¥½ï¼Œ${studentName}åŒå­¦ï¼æ‚¨çš„${courseName}è¯¾ç¨‹æˆç»©å·²å‘å¸ƒï¼Œæ€»æˆç»©ï¼š${finalScore}åˆ†ï¼Œç­‰çº§ï¼š${gradeLevel}ã€‚è¯·åŠæ—¶ç™»å½•ç³»ç»ŸæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚', '["studentName","courseName","finalScore","gradeLevel"]', '["SYSTEM","EMAIL"]'),
('EXAM_REMINDER', 'è€ƒè¯•æé†’', 'SYSTEM', 'REMINDER', '${examName}è€ƒè¯•æé†’', 'æ‚¨å¥½ï¼Œ${studentName}åŒå­¦ï¼æé†’æ‚¨ï¼šè€ƒè¯•åç§°ï¼š${examName}ï¼Œè€ƒè¯•æ—¶é—´ï¼š${examDate} ${startTime}-${endTime}ï¼Œè€ƒè¯•åœ°ç‚¹ï¼š${roomName}ã€‚è¯·æå‰30åˆ†é’Ÿåˆ°è¾¾è€ƒåœºã€‚', '["studentName","examName","examDate","startTime","endTime","roomName"]', '["SYSTEM","EMAIL"]'),
('PAYMENT_DUE', 'ç¼´è´¹æé†’', 'SYSTEM', 'REMINDER', '${itemName}ç¼´è´¹æé†’', 'æ‚¨å¥½ï¼Œ${studentName}çš„å®¶é•¿ï¼${itemName}ç¼´è´¹å³å°†åˆ°æœŸï¼Œç¼´è´¹é‡‘é¢ï¼š${amount}å…ƒï¼Œæˆªæ­¢æ—¥æœŸï¼š${dueDate}ã€‚è¯·åŠæ—¶å®Œæˆç¼´è´¹ã€‚', '["studentName","itemName","amount","dueDate"]', '["SYSTEM","EMAIL"]');
```

## æ•°æ®åº“éƒ¨ç½²

### 1. æ•°æ®åº“åˆ›å»ºè„šæœ¬

```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE campus_management
DEFAULT CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;

-- ä½¿ç”¨æ•°æ®åº“
USE campus_management;

-- è®¾ç½®æ—¶åŒº
SET time_zone = '+08:00';
```

### 2. æ•°æ®åº“è¿æ¥é…ç½®

**Spring Boot é…ç½®ç¤ºä¾‹ï¼š**
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/campus_management?useUnicode=true&characterEncoding=utf8mb4&useSSL=false&serverTimezone=Asia/Shanghai
    username: campus_user
    password: campus_password
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
```

### 3. æ•°æ®åº“ç”¨æˆ·æƒé™

```sql
-- åˆ›å»ºæ•°æ®åº“ç”¨æˆ·
CREATE USER 'campus_user'@'%' IDENTIFIED BY 'campus_password';

-- æˆæƒ
GRANT SELECT, INSERT, UPDATE, DELETE ON campus_management.* TO 'campus_user'@'%';
FLUSH PRIVILEGES;
```

## æ€»ç»“

æœ¬æ•°æ®åº“è®¾è®¡æ–‡æ¡£æ¶µç›–äº†æ™ºæ…§æ ¡å›­ç®¡ç†å¹³å°çš„å®Œæ•´æ•°æ®æ¶æ„ï¼ŒåŒ…æ‹¬ï¼š

- **21ä¸ªæ ¸å¿ƒä¸šåŠ¡è¡¨** - è¦†ç›–ç”¨æˆ·ç®¡ç†ã€æ•™åŠ¡ç®¡ç†ã€è€ƒè¯•ç®¡ç†ã€è´¢åŠ¡ç®¡ç†ã€æ¶ˆæ¯é€šçŸ¥ã€ç³»ç»Ÿç®¡ç†ç­‰æ¨¡å—
- **å®Œå–„çš„ç´¢å¼•ç­–ç•¥** - ä¿è¯æŸ¥è¯¢æ€§èƒ½å’Œæ•°æ®å®Œæ•´æ€§
- **å®ç”¨çš„è§†å›¾è®¾è®¡** - ç®€åŒ–å¤æ‚æŸ¥è¯¢å’Œæ•°æ®å±•ç¤º
- **æ ‡å‡†åŒ–çš„åˆå§‹æ•°æ®** - æä¾›ç³»ç»Ÿå¯åŠ¨æ‰€éœ€çš„åŸºç¡€æ•°æ®
- **éƒ¨ç½²é…ç½®æŒ‡å—** - ç¡®ä¿æ•°æ®åº“èƒ½å¤Ÿæ­£ç¡®éƒ¨ç½²å’Œè¿è¡Œ

è¯¥è®¾è®¡æ”¯æŒå¹³å°çš„æ ¸å¿ƒä¸šåŠ¡éœ€æ±‚ï¼Œå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ï¼Œä¸ºåç»­çš„åº”ç”¨å¼€å‘æä¾›äº†åšå®çš„æ•°æ®åŸºç¡€ã€‚
